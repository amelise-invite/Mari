<!doctype html>
<html lang="hy">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#fdeef3" />
  <title>Մարի — Սուրբ Մկրտություն • 03․11․2025</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Armenian:wght@300;400;600;700&family=Noto+Serif+Armenian:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Open Graph / Social preview -->
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="hy_AM" />
  <meta property="og:site_name" content="Amélise Invite" />
  <meta property="og:url" content="https://amelise-invite.github.io/Mari/" />
  <meta property="og:title" content="Մարի — Սուրբ Մկրտություն • 03․11․2025" />
  <meta property="og:description" content="Սիրով հրավիրում ենք ձեզ Մարիի մկրտությանը՝ 03․11․2025 • Եկեղեցի՝ Սուրբ Հովհաննես Մկրտիչ՝ 14։15 • Ռեստորան՝ Մաքսիմա (Սեբաստիա 5)՝ 17։30" />
  <meta property="og:image" content="https://amelise-invite.github.io/Mari/assets/preview15.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Մարի — Սուրբ Մկրտություն • 03․11․2025" />
  <meta name="twitter:description" content="Սիրով հրավիրում ենք ձեզ Մարիի մկրտությանը՝ 03․11․2025 • Եկեղեցի՝ Սուրբ Հովհաննես Մկրտիչ՝ 14։15 • Ռեստորան՝ Մաքսիմա (Սեբաստիա 5)՝ 17։30" />
  <meta name="twitter:image" content="https://amelise-invite.github.io/Mari/assets/preview15.jpg" />

  <style>
    :root{
      --ink:#2a2a2a;
      --muted:#6a6a6a;
      --primary:#c85b8e;
      --primary-2:#a94c7a;
      --paper:#ffffffee;
      --bg:#fff7fb;
      --radius:22px;
      --shadow:0 14px 44px rgba(0,0,0,.10);
      --maxw:980px;
      --hero-offset: 220px;
      --ok:#0a7e3d;
      --warn:#c84a3a;
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      font-family:"Noto Sans Armenian", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      color:var(--ink);
      background:var(--bg);
      line-height:1.55;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    /* BG (fixed layer, առանց background-attachment: fixed՝ Samsung/Android bug-ի համար) */
    .bg{
      position:fixed; inset:0; z-index:-3;
      background-image:url("assets/bg_flower.png");
      background-position:center;
      background-repeat:no-repeat;
      background-size:cover;
      background-attachment:scroll; /* կարևոր */
      filter:brightness(1.02) contrast(.98);
      will-change:transform;
      transform:translateZ(0);
    }
    @media (min-width: 900px){
      .bg{ background-image:url("assets/bg_flower_desktop.png"); }
    }
    @media (pointer:coarse){
      .bg{ background-attachment:scroll; } /* հավելյալ guard թաչ սարքերի համար */
    }
    @media (max-width: 768px){
      .bg{ position:absolute; } /* mobile-ում absolute էր արդեն OK */
    }

    /* Audio */
    .audio-toggle{
      position:fixed; right:16px; top:calc(12px + env(safe-area-inset-top));
      z-index:10;
      display:flex; align-items:center; justify-content:center;
      width:46px; height:46px;
      border-radius:999px;
      background:#ffffffd8; border:1px solid #e7e7e7; box-shadow:var(--shadow);
      cursor:pointer; user-select:none; -webkit-tap-highlight-color:transparent;
      backdrop-filter:saturate(110%) blur(2px);
    }
    .eq{ width:20px; height:16px; display:inline-grid; grid-auto-flow:column; gap:3px; align-items:end; }
    .bar{ width:3px; height:6px; background:var(--primary); border-radius:2px; animation:pause 1s linear infinite; }
    .audio-on .bar:nth-child(1){animation:updown .9s ease-in-out infinite}
    .audio-on .bar:nth-child(2){animation:updown 1.1s ease-in-out infinite .1s}
    .audio-on .bar:nth-child(3){animation:updown .95s ease-in-out infinite .2s}
    @keyframes updown{0%,100%{height:6px}50%{height:16px}}
    @keyframes pause{to{height:6px}}
    @media (max-width:480px){
      .audio-toggle{ right:12px; width:44px; height:44px }
      .eq{ width:18px; height:14px }
    }

    /* HERO */
    header.hero{
      min-height:92svh;
      padding:calc(var(--hero-offset) + env(safe-area-inset-top)) 16px 56px;
      display:grid; place-items:start center;
    }
    .hero-inner{ width:min(640px, 82vw); margin:0 auto; }
    @media (max-width:1024px){ .hero-inner{ width:min(560px, 84vw) } }
    @media (max-width:768px){  .hero-inner{ width:min(520px, 88vw) } }
    @media (max-width:480px){  .hero-inner{ width:min(480px, 90vw) } }

    .card{
      background:var(--paper);
      border-radius:20px;
      box-shadow:var(--shadow);
      padding:24px 22px 28px;
      text-align:center;
      border:1px solid rgba(0,0,0,.06);
      backdrop-filter: blur(2px);
    }

    .subtitle{
      font-family:"Noto Serif Armenian", serif;
      font-size:clamp(16px,2.1vw,19px);
      color:var(--muted);
      margin:2px 0 8px;
    }
    h1.names{
      font-family:"Noto Serif Armenian", serif !important;
      font-weight:700;
      font-size:clamp(36px,4.8vw,52px);
      letter-spacing:.01em;
      margin:2px 0 8px;
      color:var(--primary);
    }
    .date{
      font-weight:800;
      letter-spacing:.16em;
      font-size:clamp(18px,2.6vw,22px);
      margin:4px 0 8px;
      color:var(--primary-2);
    }

    /* Countdown */
    .countdown{
      margin-top:10px;
      display:flex; gap:10px; justify-content:center; flex-wrap:nowrap;
      font-variant-numeric:tabular-nums;
      overflow:hidden;
    }
    .cd-box{
      background:#fff; border:1px solid #f3d2df; border-radius:14px;
      width:92px; padding:10px 8px;
      box-shadow:0 8px 22px rgba(200,91,142,.10);
    }
    .cd-box b{display:block; font-size:24px; line-height:1}
    .cd-box span{display:block; margin-top:4px; font-size:12px; color:#9b8290; letter-spacing:.06em}
    @media (max-width:480px){
      .countdown{ gap:8px }
      .cd-box{ width:72px; padding:8px 6px; border-radius:12px }
      .cd-box b{ font-size:20px }
      .cd-box span{ font-size:10px }
    }

    .chevron{ margin-top:12px; width:22px; height:22px; opacity:.75; animation:bounce 1.8s infinite; cursor:pointer; }
    .chevron path{ fill:#a77a94 }
    @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(5px)}}
    @media (prefers-reduced-motion:reduce){ .chevron{ animation:none } .audio-toggle, .btn{ transition:none } }

    /* Sections */
    section{
      padding:68px 16px;
      background: linear-gradient(180deg, #ffeaf2 0%, #ffffff 100%);
    }
    .wrap{max-width:var(--maxw); margin:0 auto}
    .sec-title{ font-family:"Noto Serif Armenian", serif; text-align:center; margin:0 0 8px; font-size:clamp(26px,3.2vw,34px); color:#a24b77 }
    .time{ text-align:center; font-weight:800; font-size:clamp(22px,2.8vw,26px); margin:10px 0 8px; color:#7e3e60 }
    .desc{ text-align:center; color:#6f6f6f; margin:0 0 22px; font-size:clamp(16px,2vw,18px) }
    @media (max-width:480px){ section{ padding:58px 14px } }

    .emblem{
      width:min(220px,55vw); max-height:180px; object-fit:contain;
      display:block; margin:0 auto 14px; filter:drop-shadow(0 2px 10px rgba(0,0,0,.06))
    }

    .btn{
      display:inline-block; background:var(--primary); color:#fff; text-decoration:none; font-weight:700;
      padding:14px 22px; border-radius:999px; border:1px solid rgba(0,0,0,.06);
      box-shadow:0 10px 24px rgba(200,91,142,.22);
      transition:transform .15s ease, box-shadow .15s ease;
    }
    .btn:hover{transform:translateY(-2px); box-shadow:0 16px 30px rgba(200,91,142,.28)}
    @media (max-width:480px){ .btn{ padding:12px 18px; font-size:14px } }

    /* RSVP box */
    .rsvp{
      width:min(720px, 92vw); background:#fff; border:1px solid #f3d2df; border-radius:16px; box-shadow:var(--shadow); margin:24px auto 0; padding:18px
    }
    .r-line{height:1px; background:#f6dbe6; margin:14px 0 10px}
    .field{margin:10px 0}
    label{display:block; margin:4px 0 8px; font-weight:700}
    input[type="text"], input[type="tel"]{
      width:100%; border:1px solid #efd1dd; border-radius:12px; padding:12px 14px; font-size:16px; outline:none
    }
    input[type="text"]:focus, input[type="tel"]:focus{ border-color:#e4a8c4; box-shadow:0 0 0 4px rgba(228,168,196,.26) }
    .radio{display:flex; gap:18px; align-items:center; flex-wrap:wrap}
    .submit-row{display:flex; justify-content:center; margin-top:14px}

    /* banners */
    .banner{
      width:min(720px, 92vw); margin:12px auto 0; padding:12px 14px; border-radius:12px; border:1px solid transparent; text-align:center; font-weight:600
    }
    .banner.ok{ background:#eaf6ee; border-color:#cfe9d8; color:var(--ok) }
    .banner.warn{ background:#fff1ef; border-color:#ffd9d3; color:var(--warn) }

    footer{
      padding:46px 16px 80px;
      text-align:center;
      color:#8a7d85;
      font-family:"Noto Serif Armenian", serif;
      background: linear-gradient(180deg, #ffeaf2 0%, #ffffff 100%);
    }

    .closing{ font-size:24px; font-weight:700; margin-bottom:10px; color:#9a557a } /* ուղղված hex */

    a.link{ color:var(--primary) }

    @media (min-width: 1024px){
      :root{ --hero-offset: 170px; }
    }
    @media (max-width: 768px){
      :root{ --hero-offset: 140px; }
    }

    /* Փոքրիկ հուշում, եթե բրաուզերը արգելեց բարձրաձայն ավտոպլեյը */
    .sound-hint{
      position:fixed; left:50%; bottom:22px; transform:translateX(-50%);
      background:#ffffffea; border:1px solid #e8d1db; box-shadow:var(--shadow);
      padding:10px 14px; border-radius:999px; font-weight:700; color:#8a5a72; z-index:15; display:none;
    }
  </style>
</head>
<body>
  <div class="bg" aria-hidden="true"></div>

  <!-- Audio -->
  <button id="audioBtn" class="audio-toggle" type="button" aria-pressed="false" aria-label="Թողարկել/կանգնեցնել երաժշտությունը">
    <div class="eq"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
  </button>
  <div id="soundHint" class="sound-hint">Սեղմեք՝ ձայնը միացնելու համար 🔊</div>
  <audio id="bgm" src="assets/music.mp3" preload="auto" loop playsinline></audio>

  <!-- HERO -->
  <header class="hero" id="home">
    <div class="hero-inner">
      <div class="card">
        <div class="subtitle">Հարգելի հյուրեր, սիրով հրավիրում ենք ձեզ մեր դստեր մկրտությանը և ծննդյան տարեդարձին</div>
        <h1 class="names">Մարի</h1>
        <div class="date">03․11․2025</div>

        <div class="countdown" id="countdown">
          <div class="cd-box"><b>—</b><span>ՕՐ</span></div>
          <div class="cd-box"><b>—</b><span>ԺԱՄ</span></div>
          <div class="cd-box"><b>—</b><span>ՐՈՊԵ</span></div>
          <div class="cd-box"><b>—</b><span>ՎՐԿ</span></div>
        </div>

        <svg class="chevron" id="toCeremony" viewBox="0 0 24 24" aria-label="Սքրոլ դեպի արարողություն" role="button" tabindex="0">
          <path d="M6.7 8.7a1 1 0 0 1 1.4 0L12 12.6l3.9-3.9a1 1 0 1 1 1.4 1.4l-4.6 4.6a1 1 0 0 1-1.4 0L6.7 10.1a1 1 0 0 1 0-1.4z"/>
        </svg>
      </div>
    </div>
  </header>

  <!-- Ceremony -->
  <section id="ceremony">
    <div class="wrap">
      <img class="emblem" src="assets/church_sketch.png" alt="Եկեղեցու գծանկար" loading="lazy" decoding="async">
      <h2 class="sec-title">Մկրտության արարողություն</h2>
      <div class="time">Ժամը՝ 14:15</div>
      <p class="desc">Սպասում ենք ձեզ <b>Սուրբ Հովհաննես Մկրտիչ</b> եկեղեցում  հասցե՝ <b>Ք․ Աբովյան</b></p>
      <p style="text-align:center">
        <a class="btn" href="https://www.google.com/maps/place/%D0%A6%D0%B5%D1%80%D0%BA%D0%BE%D0%B2%D1%8C+%D0%A1%D0%B2%D1%8F%D1%82%D0%BE%D0%B3%D0%BE+%D0%98%D0%BE%D0%B0%D0%BD%D0%BD%D0%B0+%D0%9A%D1%80%D0%B5%D1%81%D1%82%D0%B8%D1%82%D0%B5%D0%BB%D1%8F/@40.2758969,44.6314737,672m/data=!3m2!1e3!4b1!4m6!3m5!1s0x406aa1cd852829d9:0xd8c583e01d008291!8m2!3d40.2758969!4d44.6314737!16s%2Fg%2F11cjkmr2w1?entry=ttu&g_ep=EgoyMDI1MTAxMi4wIKXMDSoASAFQAw%3D%3D">Քարտեզ</a>
      </p>
    </div>
  </section>

  <!-- Reception -->
  <section id="reception">
    <div class="wrap">
      <img class="emblem" src="assets/hall_sketch.png" alt="Սրահի գծանկար" loading="lazy" decoding="async">
      <h2 class="sec-title">Հյուրասիրություն</h2>
      <div class="time">Ժամը՝ 17:30</div>
      <p class="desc">Շարունակությունը՝ <b>Մաքսիմա</b> ռեստորան, հասցե՝ <b>Սեբաստիա 5</b></p>
      <p style="text-align:center">
        <a class="btn" href="https://www.google.com/maps/search/?api=1&query=%D5%84%D5%A1%D6%84%D5%BD%D5%AB%D5%B4%D5%A1+%D5%BC%D5%A5%D5%BD%D5%BF%D5%B8%D6%80%D5%A1%D5%B6+%D5%8D%D5%A5%D5%A2%D5%A1%D5%BD%D5%BF%D5%AB%D5%A1+5" target="_blank" rel="noopener">Քարտեզ</a>
      </p>
    </div>
  </section>

  <!-- RSVP -->
  <section id="rsvp">
    <div class="wrap">
      <h2 class="sec-title">Ձեր ներկայությունը մեզ համար շատ կարևոր է</h2>
      <p class="desc">Խնդրում ենք հաստատել ձեր ներկայությունը մինչև հոկտեմբերի 27-ը</p>

      <!-- success / error banners -->
      <div id="sentBanner" class="banner ok" style="display:none" role="alert">✅ Շնորհակալ ենք՝ ձեր հաղորդագրությունը հաջողությամբ ուղարկվեց։</div>
      <div id="warnBanner" class="banner warn" style="display:none" role="alert">⚠️ Խնդրում ենք լրացնել բոլոր դաշտերը ճիշտ ձևաչափով կամ կրկին փորձել։</div>

      <!-- REAL submission via AJAX (FormSubmit) -->
      <form id="rsvpForm" class="rsvp" method="POST" target="_self" novalidate>
        <input type="hidden" name="_subject" value="RSVP • Մարի — Մկրտություն • 03․11․2025">
        <input type="hidden" name="_template" value="table">
        <input type="hidden" name="_captcha" value="false">
        <input type="text" name="_honey" style="display:none" tabindex="-1" autocomplete="off">

        <div class="field">
          <label for="name">Ձեր անուն, ազգանուն</label>
          <input id="name" type="text" name="Անուն Ազգանուն" placeholder="" required>
        </div>
        <div class="field">
          <label for="guests">Հյուրերի քանակ</label>
          <input id="guests" type="tel" name="Հյուրերի քանակ" inputmode="numeric" pattern="[0-9]{1,3}" placeholder="" required>
        </div>

        <div class="r-line"></div>

        <div class="field">
          <span style="display:block; font-weight:700; margin:4px 0 6px">Կկարողանա՞ք ներկա լինել</span>
          <div class="radio">
            <label><input type="radio" name="Մասնակցություն" value="Այո, կմասնակցեմ" required> Այո, կմասնակցեմ</label>
            <label><input type="radio" name="Մասնակցություն" value="Ցավոք, ոչ"> Ցավոք, ոչ</label>
          </div>
        </div>

        <div class="submit-row">
          <button class="btn" type="submit">Ուղարկել</button>
        </div>
      </form>
    </div>
  </section>

  <footer>
    <div class="wrap">
      <p class="closing">Սիրով՝ Ավագյաններ</p>
      <p style="margin-top:6px; font-size:14px">
        Amelise Invite • © 2025
        • <a href="tel:+37498433250" class="link">Զանգ</a>
        • <a href="https://wa.me/37498433250" target="_blank" rel="noopener" class="link">WhatsApp</a>
        • <a href="https://instagram.com/amelise.invite" target="_blank" rel="noopener" class="link">Instagram</a>
      </p>
    </div>
  </footer>

  <script>
    /* ===================== CONFIG ===================== */
    const RECIPIENT_EMAIL = "marine.hayrapetyan.76@gmail.com";
    /* ================================================= */

    // Countdown -> 2025-11-03 14:15 (+04:00)
    const target = new Date("2025-11-03T14:15:00+04:00").getTime();
    const boxes = document.querySelectorAll('#countdown .cd-box b');
    function tick(){
      const now = Date.now();
      let diff = Math.max(0, target - now);
      const d = Math.floor(diff / 86400000); diff -= d*86400000;
      const h = Math.floor(diff / 3600000);  diff -= h*3600000;
      const m = Math.floor(diff / 60000);    diff -= m*60000;
      const s = Math.floor(diff / 1000);
      boxes[0].textContent = d;
      boxes[1].textContent = String(h).padStart(2,'0');
      boxes[2].textContent = String(m).padStart(2,'0');
      boxes[3].textContent = String(s).padStart(2,'0');
    }
    tick(); setInterval(tick, 1000);

    // Smooth scroll to ceremony
    const chev = document.getElementById('toCeremony');
    const go = () => document.getElementById('ceremony')?.scrollIntoView({behavior:'smooth', block:'start'});
    chev?.addEventListener('click', go);
    chev?.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') go(); });

    // Audio control + robust autoplay
    const audio = document.getElementById('bgm');
    const btn = document.getElementById('audioBtn');
    const soundHint = document.getElementById('soundHint');

    function setBtn(on){
      btn.classList.toggle('audio-on', !!on);
      btn.setAttribute('aria-pressed', on ? 'true' : 'false');
    }

    async function tryLoudAutoplay(){
      audio.muted = false;
      audio.volume = 1;
      try{
        await audio.play();
        setBtn(true);
        soundHint.style.display = 'none';
        return true;
      }catch(e){
        return false;
      }
    }

    async function tryMutedAutoplay(){
      audio.muted = true;
      audio.volume = 0;
      try{
        await audio.play();
        // ցույց ենք տալիս հուշում՝ միացնելու ձայնը
        soundHint.style.display = 'block';
        setBtn(true);
        return true;
      }catch(e){
        return false;
      }
    }

    async function primeAudio(){
      // Սկզբում փորձում ենք բարձրաձայն ավտոպլեյ
      const okLoud = await tryLoudAutoplay();
      if(okLoud) return;

      // Եթե արգելվեց՝ լռած ավտոպլեյ + հուշում
      const okMuted = await tryMutedAutoplay();
      if(!okMuted){
        // եթե նույնիսկ լռած չի ստացվում, թողնում ենք կոճակ/ժեստ
        setBtn(false);
      }
    }

    // Փորձել ավտոպլեյ՝ երբ DOM-ը պատրաստ է և տեսանելի է
    document.addEventListener('DOMContentLoaded', () => {
      if (document.visibilityState === 'visible') primeAudio();
    });
    document.addEventListener('visibilitychange', () => {
      if (!document.hidden) primeAudio();
    });

    // Կարող են նաև ձեռքով միացնել/անջատել
    btn.addEventListener('click', async () => {
      if(audio.paused){
        // եթե լռած էր, միանգամից բարձրացնենք ձայնը
        audio.muted = false; audio.volume = 1;
        try{ await audio.play(); setBtn(true); soundHint.style.display='none'; }catch(e){}
      }else{
        audio.pause(); setBtn(false);
      }
    });

    // Ցանկացած առաջին ժեստից՝ միացնում ենք ձայնը, եթե դեռ լռած է
    let unlocked = false;
    function unlockOnce(){
      if(unlocked) return;
      unlocked = true;
      if(!audio.paused){
        audio.muted = false; audio.volume = 1;
        soundHint.style.display = 'none';
      }else{
        // եթե դեռ չէր խաղում, փորձել ձայնով
        tryLoudAutoplay().then(ok => {
          if(!ok) tryMutedAutoplay();
        });
      }
      ['scroll','wheel','touchstart','pointerdown','keydown','click'].forEach(ev => window.removeEventListener(ev, unlockOnce, {passive:true}));
    }
    ['scroll','wheel','touchstart','pointerdown','keydown','click'].forEach(ev => window.addEventListener(ev, unlockOnce, {passive:true}));

    // Թաբը թաքնվելու դեպքում՝ կանգնեցնել, վերադառնալիս՝ շարունակել
    let wasPlaying = false;
    document.addEventListener('visibilitychange', ()=>{
      if(document.hidden){ wasPlaying = !audio.paused; audio.pause(); setBtn(false); }
      else if(wasPlaying){ primeAudio(); }
    });

    /* ===================== RSVP via AJAX ===================== */
    const form = document.getElementById('rsvpForm');
    const sentBanner = document.getElementById('sentBanner');
    const warnBanner = document.getElementById('warnBanner');

    form.addEventListener('submit', async (e)=>{
      e.preventDefault(); // Մնում ենք նույն էջում

      // Հեշտ client-side ստուգումներ
      const name = document.getElementById('name').value.trim();
      const guests = document.getElementById('guests').value.trim();
      if(!name || !guests || !/^[0-9]{1,3}$/.test(guests)){
        warnBanner.style.display = 'block';
        setTimeout(()=> warnBanner.style.display='none', 3000);
        return;
      }

      // Կազմում ենք FormData-ն
      const fd = new FormData(form);
      // ուղարկում ենք AJAX տարբերակով — FormSubmit-ը վերադարձնում է JSON
      try{
        const res = await fetch(`https://formsubmit.co/ajax/${encodeURIComponent(RECIPIENT_EMAIL)}`, {
          method:'POST',
          body: fd,
          headers: { 'Accept':'application/json' }
        });

        if(res.ok){
          sentBanner.style.display = 'block';
          warnBanner.style.display = 'none';
          form.reset();
          setTimeout(()=> sentBanner.scrollIntoView({behavior:'smooth', block:'center'}), 100);
        }else{
          warnBanner.style.display = 'block';
          setTimeout(()=> warnBanner.style.display='none', 3500);
        }
      }catch(err){
        warnBanner.style.display = 'block';
        setTimeout(()=> warnBanner.style.display='none', 3500);
      }
    });
  </script>
</body>
</html>
